<!DOCTYPE html>
<html>
<head th:replace="~{/common/config :: config}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <style>
        .text-muted {
            color: #6c757d !important; /* 더 진한 회색 */
        }
        .text-total {
            color: #333;
            font-weight: bold;
        }
    </style>
</head>
<body>
<div th:if="${accessTokenExists==true}">
    <header th:replace="~{common/loginedHeader}"/>
</div>

<div th:if="${accessTokenExists==false}">
    <header th:replace="~{common/header}"/>
</div>

<main class="container my-5">
    <div class="row">
        <!-- 책 이미지 -->
        <div class="col-md-4">
            <img src="/images/product-item1.png" class="img-fluid rounded" alt="Book Cover">
        </div>

        <!-- 책 정보 -->
        <div class="col-md-8">
            <h2>성적을 부탁해 티처스</h2>
            <p class="text-muted">저자: 정성식, 조정식 | 출판사: 북라이프 | 발행일: 2024년 10월 29일</p>
            <p class="fs-4 text-danger fw-bold">19,800원 <del class="text-muted fs-6">22,000원</del> <span class="fs-6 text-danger">(10% 할인)</span></p>

            <div class="border p-3 mb-3">
                <p>적립금: 1,000원 (5% 적립)</p>
                <p>결제혜택: 우리카드 할인 쿠폰</p>
                <p>회원 가입 즉시 지급되는 적립금과 등급별 다양한 회원 혜택 보기</p>
            </div>

            <div class="border p-3 mb-3">
                <p>배송비: 무료 (배송비는 경우 지역에 따라 상이)</p>
                <p>배송안내: 서울특별시 강남구 강남대로 542 (논현동, 정광빌딩)</p>
                <p class="text-success">오늘 도착 가능</p>
            </div>

            <!-- 수량 선택과 총 금액 -->
            <div class="border p-3 mb-3">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <label for="quantity" class="me-3 mb-0">수량</label>
                    <div class="input-group w-50">
                        <button class="btn btn-outline-secondary" type="button" id="decreaseQuantity">-</button>
                        <input type="number" id="quantity" value="1" min="1" class="form-control text-center" aria-label="Quantity">
                        <button class="btn btn-outline-secondary" type="button" id="increaseQuantity">+</button>
                    </div>
                </div>

                <p class="text-muted small">주문 수량 변경시 안내</p>
                <p class="text-muted small">실결제 금액은 적립금, 쿠폰 등에 따라 달라질 수 있습니다.</p>

                <div class="text-end mt-3">
                    <span class="text-total">총 금액: <span id="totalPrice">19,800</span>원</span>
                </div>

                <div class="d-flex justify-content-between mt-3">
                    <button class="btn btn-outline-secondary flex-fill me-1">장바구니</button>
                    <button class="btn btn-success flex-fill me-1">바로구매</button>
                    <button class="btn btn-danger flex-fill">나우드림</button>
                </div>
            </div>

            <div class="text-muted">
                <span class="badge bg-light text-dark">#학생</span>
                <span class="badge bg-light text-dark">#자기계발</span>
                <span class="badge bg-light text-dark">#성적상승</span>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{common/footer :: footer}"></footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // 수량과 총 금액 업데이트
    const unitPrice = 19800; // 책의 단가
    const quantityInput = document.getElementById("quantity");
    const totalPriceElement = document.getElementById("totalPrice");

    // 수량 변경 이벤트
    document.getElementById("decreaseQuantity").addEventListener("click", () => {
        if (quantityInput.value > 1) {
            quantityInput.value--;
            updateTotalPrice();
        }
    });

    document.getElementById("increaseQuantity").addEventListener("click", () => {
        quantityInput.value++;
        updateTotalPrice();
    });

    quantityInput.addEventListener("input", updateTotalPrice);

    // 총 금액 업데이트 함수
    function updateTotalPrice() {
        const quantity = parseInt(quantityInput.value);
        const totalPrice = unitPrice * quantity;
        totalPriceElement.textContent = totalPrice.toLocaleString(); // 금액에 콤마 추가
    }

    updateTotalPrice();
</script>
</body>
</html>
