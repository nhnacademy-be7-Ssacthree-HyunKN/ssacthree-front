<!DOCTYPE html>
<html lang="en">
<head th:replace="~{common/config :: config}">
    <meta charset="UTF-8">
    <title>Book Details</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>
<body>

<header th:replace="~{common/header}"></header>

<!-- 카테고리 경로 -->
<div class="container my-3" style="padding-top:20px">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="/"><img src="/images/home-icon.png"
                                                         style="padding-bottom:5px"></a></li>
            <li th:each="category, iterStat : ${categoryPaths[0]}"
                th:classappend="${iterStat.last} ? 'breadcrumb-item active' : 'breadcrumb-item'">
                <a th:href="@{/categories/{id}(id=${category.categoryId})}"
                   th:text="${category.categoryName}"></a>
            </li>
        </ol>
    </nav>
</div>


<main class="container my-5">
    <div class="row" th:each="book : ${book}">
        <!-- 책 이미지 -->
        <div class="col-md-4" style="padding-top:50px; padding-left:20px">
            <img th:src="${book.bookThumbnailImageUrl}" class="img-fluid rounded" alt="Book Cover"
                 style="height:550px">

            <!-- 태그 목록 -->
            <div class="container mb-3" style="margin-top:30px">
                <!--    <div class="d-flex flex-wrap">-->
                <!--        <span th:each="tag : ${book.tags}" class="badge bg-light text-dark me-2">#<span th:text="${tag.tagName}"></span></span>-->
                <!--    </div>-->
                <div class="text-muted">
                    <span class="badge bg-light text-dark">#학생</span>
                    <span class="badge bg-light text-dark">#자기계발</span>
                    <span class="badge bg-light text-dark">#성적상승</span>
                </div>
            </div>
        </div>

        <!-- 책 정보 -->
        <div class="col-md-8">
            <h2 th:text="${book.bookName}"></h2>
            <p class="text-muted">저자: <span th:each="item, iterStat : ${book.authors}"><span
                    th:text="${item.authorName}"></span><span th:if="${!iterStat.last}">, </span></span> |
                출판사: <span th:text="${book.publisher.publisherName}"></span> | 발행일: <span
                        th:text="${#temporals.format(book.publicationDate, 'yyyy-MM-dd')}"></span>
            </p>
            <p class="fs-4 text-danger fw-bold"><span id="unitPrice" th:text="${book.salePrice}"></span>원
                <del class="text-muted fs-6"><span th:text="${book.regularPrice}"></span>원</del>
                <span class="fs-6 text-danger">(</span><span class="fs-6 text-danger"
                                                             th:text="${book.bookDiscount}"></span><span
                        class="fs-6 text-danger">% 할인)</span></p>

            <div class="border p-3 mb-3">
                <p>적립금: 1,000원 (5% 적립)</p>
            </div>

            <div class="border p-3 mb-3">
                <p>배송비: 무료 (배송비는 경우 지역에 따라 상이)</p>
                <p class="text-success">오늘 도착 가능</p>
            </div>

            <!-- 수량 선택과 총 금액 -->
            <div class="border p-3 mb-3">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <label for="quantity" class="me-3 mb-0">수량</label>
                    <div class="input-group w-50">
                        <button class="btn btn-outline-secondary" type="button" id="decreaseQuantity">-</button>
                        <input type="number" id="quantity" value="1" min="1" class="form-control text-center"
                               aria-label="Quantity">
                        <button class="btn btn-outline-secondary" type="button" id="increaseQuantity">+</button>
                    </div>
                </div>

                <p class="text-muted small">주문 수량 변경시 안내</p>
                <p class="text-muted small">실결제 금액은 적립금, 쿠폰 등에 따라 달라질 수 있습니다.</p>

                <div class="text-end mt-3">
                    <span class="text-total">총 금액: <span id="totalPrice" th:text="${book.salePrice}"></span>원</span>
                </div>

                <div class="d-flex justify-content-between mt-3">
                    <button class="btn btn-outline-secondary flex-fill me-1">장바구니</button>
                    <button class="btn btn-success flex-fill me-1">바로구매</button>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- 책 설명 섹션 -->
<div class="row" th:each="book : ${book}">
    <!-- 기존 책 이미지 및 정보 코드 -->

    <!-- 책 설명 섹션 -->
    <div class="container my-5">
        <div class="card mb-3 shadow-sm">
            <div class="card-header bg-light text-primary fw-bold border-0" style="font-size: 1.5rem;">
                책 소개
            </div>
            <div class="list-group list-group-flush">
                <!-- 책이 속한 분야 -->
                <div class="list-group-item">
                    <h6 class="text-dark fw-bold mb-3" style="font-size: 1.1rem;">이 책이 속한 분야</h6>
                    <ul class="list-inline ps-3" style="font-size: 0.9rem;">
                        <!--                        <li th:each="category : ${book.categories}" class="list-inline-item me-2">-->
                        <!--                            <a th:href="@{/categories/{id}(id=${category.categoryId})}" th:text="${category.categoryName}" class="text-decoration-none text-dark" style="pointer-events: none;"></a>-->
                        <!--                        </li>-->
                    </ul>
                </div>

                <!-- 책 설명 -->
                <div class="list-group-item">
                    <h6 class="text-dark fw-bold mb-3" style="font-size: 1.1rem;">책 설명</h6>
                    <!--                    <p th:text="${book.description}" class="text-muted" style="line-height: 1.6; font-size: 0.9rem;"></p>-->
                </div>

                <!-- 목차 -->
                <div class="list-group-item">
                    <h6 class="text-dark fw-bold mb-3" style="font-size: 1.1rem;">목차</h6>
                    <!--                    <p th:text="${book.tableOfContents}" class="text-muted" style="line-height: 1.6; font-size: 0.9rem;"></p>-->
                </div>

                <!-- 작가 소개 -->
                <div class="list-group-item">
                    <h6 class="text-dark fw-bold mb-3" style="font-size: 1.1rem;">작가 소개</h6>
                    <!--                    <p th:each="author : ${book.authors}" th:text="${author.bio}" class="text-muted" style="line-height: 1.6; font-size: 0.9rem;"></p>-->
                </div>

                <!-- 출판사 소개 -->
                <div class="list-group-item">
                    <h6 class="text-dark fw-bold mb-3" style="font-size: 1.1rem;">출판사 소개</h6>
                    <!--                    <p th:text="${book.publisher.description}" class="text-muted" style="line-height: 1.6; font-size: 0.9rem;"></p>-->
                </div>

                <!-- 기본 정보 -->
                <div class="list-group-item">
                    <h6 class="text-dark fw-bold mb-3" style="font-size: 1.1rem;">기본 정보</h6>
                    <ul class="list-unstyled ps-3" style="font-size: 0.9rem;">
                        <!--                        <li><strong>ISBN:</strong> <span th:text="${book.isbn}"></span></li>-->
                        <!--                        <li><strong>발행일:</strong> <span th:text="${#temporals.format(book.publicationDate, 'yyyy-MM-dd')}"></span></li>-->
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="~{common/footer :: footer}"></footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/book.js"></script>
</body>
</html>
