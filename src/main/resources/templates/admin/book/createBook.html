<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/config :: config}">
    <title>도서 등록</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0-beta.1/css/select2.min.css" rel="stylesheet" />
    /* 기본 스타일 */
    .form-label-with-button {
    display: flex;
    justify-content: space-between;
    align-items: center;
    }

    .form-label {
    font-size: 1.1rem;
    font-weight: 500;
    margin-right: 10px;
    }

    .book-save-button {
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    border-radius: 20px;
    cursor: pointer;
    background-color: var(--primary-color); /* 기본 색상에 맞게 변경 */
    color: var(--white-color);
    border: 1px solid var(--primary-color); /* 버튼 테두리 색 */
    }

    .book-save-button:hover {
    background-color: var(--primary-dark-color); /* 호버 시 색상 변경 */
    border-color: var(--primary-dark-color); /* 호버 시 테두리 색상 변경 */
    }

    .select-hidden {
    display: none;
    }

    .input-group select {
    width: 100%;
    padding: 0.75rem;
    font-size: 1rem;
    border-radius: 5px;
    border: 1px solid #ccc;
    }

    /* 선택 박스를 예쁘게 스타일링 (기본 브라우저 스타일을 수정) */
    .input-group select:focus {
    border-color: var(--primary-color); /* 포커스 시 테두리 색상 */
    outline: none;
    }

    .mb-3 {
    margin-bottom: 1rem;
    }

<body>
<header th:replace="~{common/adminHeader :: header}" />

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg border-0 rounded-3">
                <div class="card-header bg-primary text-white text-center">
                    <h3>도서 등록</h3>
                </div>
                <div class="card-body">
                    <form th:action="@{/admin/books/create}" th:method="post" th:object="${bookSaveRequest}">
                        <!-- 도서 제목 -->
                        <div class="mb-3">
                            <label for="bookName" class="form-label">도서 제목</label>
                            <input type="text" class="form-control" th:field="*{bookName}" id="bookName" required>
                        </div>

                        <!-- 목차 -->
                        <div class="mb-3">
                            <label for="bookIndex" class="form-label">목차</label>
                            <textarea class="form-control" th:field="*{bookIndex}" id="bookIndex" rows="4" required></textarea>
                        </div>

                        <!-- 도서 설명 -->
                        <div class="mb-3">
                            <label for="bookInfo" class="form-label">도서 설명</label>
                            <textarea class="form-control" th:field="*{bookInfo}" id="bookInfo" rows="4" required></textarea>
                        </div>

                        <!-- ISBN -->
                        <div class="mb-3">
                            <label for="bookIsbn" class="form-label">ISBN13</label>
                            <input type="text" class="form-control" th:field="*{bookIsbn}" id="bookIsbn" required>
                        </div>

                        <!-- 출판일 -->
                        <div class="mb-3">
                            <label for="publicationDate" class="form-label">출판일</label>
                            <input type="date" class="form-control" th:field="*{publicationDate}" id="publicationDate" required>
                        </div>

                        <!-- 판매가 -->
                        <div class="mb-3">
                            <label for="regularPrice" class="form-label">판매가</label>
                            <input type="number" class="form-control" th:field="*{regularPrice}" id="regularPrice" required>
                        </div>

                        <!-- 할인 가격 -->
                        <div class="mb-3">
                            <label for="salePrice" class="form-label">할인 가격</label>
                            <input type="number" class="form-control" th:field="*{salePrice}" id="salePrice">
                        </div>

                        <!-- 포장 여부 -->
                        <div class="mb-3">
                            <label class="form-label">포장 여부</label>
                            <div>
                                <input type="radio" th:field="*{isPacked}" id="isPackedYes" value="true">
                                <label for="isPackedYes">예</label>
                                <input type="radio" th:field="*{isPacked}" id="isPackedNo" value="false" checked>
                                <label for="isPackedNo">아니오</label>
                            </div>
                        </div>

                        <!-- 재고 -->
                        <div class="mb-3">
                            <label for="stock" class="form-label">재고</label>
                            <input type="number" class="form-control" th:field="*{stock}" id="stock" required>
                        </div>

                        <!-- 썸네일 이미지 업로드 -->
                        <div class="mb-3">
                            <label for="file" class="form-label">썸네일 이미지 업로드</label>
                            <input type="file" class="form-control" th:field="*{bookThumbnailImageUrl}" id="file" name="file" required>
                        </div>

                        <!-- 할인율 -->
                        <div class="mb-3">
                            <label for="bookDiscount" class="form-label">할인율 (%)</label>
                            <input type="number" class="form-control" th:field="*{bookDiscount}" id="bookDiscount" min="0" max="100">
                        </div>

                        <!-- 카테고리 선택 -->
                        <div class="mb-3">
                            <div class="form-label-with-button">
                                <label for="categories" class="form-label">카테고리</label>
                                <button type="button" class="book-save-button" onclick="location.href='/admin/categories'">카테고리 추가</button>
                            </div>
                            <div class="input-group">
                                <select id="categories" class="form-select select-hidden" th:field="*{categoryIdList}" multiple>
                                    <option th:each="category : ${categories}" th:value="${category.categoryId}" th:text="${category.categoryName}"></option>
                                </select>
                            </div>
                        </div>

                        <!-- 태그 선택 -->
                        <div class="mb-3">
                            <div class="form-label-with-button">
                                <label for="tags" class="form-label">태그</label>
                                <button type="button" class="book-save-button" onclick="location.href='/admin/tags'">태그 추가</button>
                            </div>
                            <div class="input-group">
                                <select id="tags" class="form-select select-hidden"  th:field="*{tagIdList}" multiple>
                                    <option th:each="tag : ${tags}" th:value="${tag.tagId}" th:text="${tag.tagName}"></option>
                                </select>
                            </div>
                        </div>

                        <!-- 출판사 선택 -->
                        <div class="mb-3">
                            <div class="form-label-with-button">
                                <label for="publishers" class="form-label">출판사</label>
                                <button type="button" class="book-save-button" onclick="location.href='/admin/publishers/create'">출판사 추가</button>
                            </div>
                            <div class="input-group">
                                <select id="publishers" class="form-select select-hidden"  th:field="*{publisherId}">
                                    <option th:each="publisher : ${publishers}" th:value="${publisher.publisherId}" th:text="${publisher.publisherName}"></option>
                                </select>
                            </div>
                        </div>

                        <!-- 작가 선택 -->
                        <div class="mb-3">
                            <div class="form-label-with-button">
                                <label for="authors" class="form-label">작가</label>
                                <button type="button" class="book-save-button" onclick="location.href='/admin/authors/create'">작가 추가</button>
                            </div>
                            <div class="input-group">
                                <select id="authors" class="form-select select-hidden"  th:field="*{authorIdList}" multiple>
                                    <option th:each="author : ${authors}" th:value="${author.authorId}" th:text="${author.authorName}"></option>
                                </select>
                            </div>
                        </div>

                        <!-- 도서 등록 버튼 -->
                        <div class="mb-3 text-center">
                            <button type="submit" class="btn btn-primary">등록하기</button>
                            <a href="/admin/books" class="btn btn-secondary">취소</a>
                        </div>


                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="~{common/footer :: footer}"/>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0-beta.1/js/select2.min.js"></script>
<script>
    $(document).ready(function() {
        // 다중 선택 가능한 요소들에 select2 적용
        $('#categories').select2({
            placeholder: "카테고리를 선택하십시오",
            allowClear: true
        });

        $('#tags').select2({
            placeholder: "태그를 선택하십시오",
            allowClear: true
        });

        $('#authors').select2({
            placeholder: "작가를 선택하십시오",
            allowClear: true
        });

        // 단일 선택 요소에 select2 적용
        $('#publishers').select2({
            placeholder: "출판사를 선택하십시오",
            allowClear: true
        });
    });
</script>


</body>
</html>